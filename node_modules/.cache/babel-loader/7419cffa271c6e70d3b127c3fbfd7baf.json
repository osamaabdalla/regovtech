{"ast":null,"code":"import * as constants from \"../constants\";\n\nfunction authenticate() {\n  return {\n    type: constants.AUTHENTICATE\n  };\n}\n\nfunction unauthenticate() {\n  return {\n    type: constants.UNAUTHENTICATE\n  };\n}\n\nexport function logIn() {\n  return async dispatch => {\n    await window.localStorage.setItem(\"authenticated\", \"true\");\n    dispatch(authenticate());\n  };\n}\nexport function logOut() {\n  return async dispatch => {\n    await window.localStorage.setItem(\"authenticated\", \"false\");\n    dispatch(unauthenticate());\n  };\n}\nexport function updateAccount(user) {\n  return async dispatch => {\n    var savedusers = window.localStorage.getItem(\"usersdata\");\n    var usersdata = [];\n\n    if (savedusers) {\n      usersdata = JSON.parse(savedusers);\n    }\n\n    var newuser = JSON.stringify(user);\n    usersdata.push(newuser);\n    await window.localStorage.setItem(\"usersdata\", JSON.stringify(usersdata));\n    dispatch(unauthenticate());\n  };\n}\nexport function checkAuthentication() {\n  return async dispatch => {\n    const auth = await window.localStorage.getItem(\"authenticated\");\n    const formattedAuth = typeof auth === \"string\" ? JSON.parse(auth) : null;\n    formattedAuth ? dispatch(authenticate()) : dispatch(unauthenticate());\n  };\n}","map":{"version":3,"sources":["/Users/OsamaAbdullah/Downloads/TempFiles/Today/ReactJs/routing-react-redux-authenticated/src/actions/current.tsx"],"names":["constants","authenticate","type","AUTHENTICATE","unauthenticate","UNAUTHENTICATE","logIn","dispatch","window","localStorage","setItem","logOut","updateAccount","user","savedusers","getItem","usersdata","JSON","parse","newuser","stringify","push","checkAuthentication","auth","formattedAuth"],"mappings":"AAEA,OAAO,KAAKA,SAAZ,MAA2B,cAA3B;;AAOA,SAASC,YAAT,GAAuC;AACrC,SAAO;AACLC,IAAAA,IAAI,EAAEF,SAAS,CAACG;AADX,GAAP;AAGD;;AAMD,SAASC,cAAT,GAA2C;AACzC,SAAO;AACLF,IAAAA,IAAI,EAAEF,SAAS,CAACK;AADX,GAAP;AAGD;;AAID,OAAO,SAASC,KAAT,GAAiB;AACtB,SAAO,MAAOC,QAAP,IAA6D;AAClE,UAAMC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B,EAA6C,MAA7C,CAAN;AACAH,IAAAA,QAAQ,CAACN,YAAY,EAAb,CAAR;AACD,GAHD;AAID;AAED,OAAO,SAASU,MAAT,GAAkB;AACvB,SAAO,MAAOJ,QAAP,IAA6D;AAClE,UAAMC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B,EAA6C,OAA7C,CAAN;AACAH,IAAAA,QAAQ,CAACH,cAAc,EAAf,CAAR;AACD,GAHD;AAID;AAED,OAAO,SAASQ,aAAT,CAAuBC,IAAvB,EAA6B;AAClC,SAAO,MAAON,QAAP,IAA6D;AAClE,QAAIO,UAAU,GAAGN,MAAM,CAACC,YAAP,CAAoBM,OAApB,CAA4B,WAA5B,CAAjB;AACA,QAAIC,SAAS,GAAG,EAAhB;;AACA,QAAGF,UAAH,EAAc;AACZE,MAAAA,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWJ,UAAX,CAAZ;AACD;;AACD,QAAIK,OAAO,GAAGF,IAAI,CAACG,SAAL,CAAeP,IAAf,CAAd;AACAG,IAAAA,SAAS,CAACK,IAAV,CAAeF,OAAf;AACA,UAAMX,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,EAAyCO,IAAI,CAACG,SAAL,CAAeJ,SAAf,CAAzC,CAAN;AACAT,IAAAA,QAAQ,CAACH,cAAc,EAAf,CAAR;AACD,GAVD;AAWD;AAED,OAAO,SAASkB,mBAAT,GAA+B;AACpC,SAAO,MAAOf,QAAP,IAA6D;AAClE,UAAMgB,IAAI,GAAG,MAAMf,MAAM,CAACC,YAAP,CAAoBM,OAApB,CAA4B,eAA5B,CAAnB;AACA,UAAMS,aAAa,GAAG,OAAOD,IAAP,KAAgB,QAAhB,GACpBN,IAAI,CAACC,KAAL,CAAWK,IAAX,CADoB,GAEpB,IAFF;AAIAC,IAAAA,aAAa,GAAGjB,QAAQ,CAACN,YAAY,EAAb,CAAX,GAA8BM,QAAQ,CAACH,cAAc,EAAf,CAAnD;AACD,GAPD;AAQD","sourcesContent":["import { ThunkDispatch as Dispatch } from \"redux-thunk\";\n\nimport * as constants from \"../constants\";\nimport { ICurrent } from \"../types\";\n\nexport interface IAuthenticate {\n  type: constants.AUTHENTICATE;\n}\n\nfunction authenticate(): IAuthenticate {\n  return {\n    type: constants.AUTHENTICATE,\n  };\n}\n\nexport interface IUnauthenticate {\n  type: constants.UNAUTHENTICATE;\n}\n\nfunction unauthenticate(): IUnauthenticate {\n  return {\n    type: constants.UNAUTHENTICATE,\n  };\n}\n\nexport type AuthenticationAction = IAuthenticate | IUnauthenticate;\n\nexport function logIn() {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    await window.localStorage.setItem(\"authenticated\", \"true\");\n    dispatch(authenticate());\n  };\n}\n\nexport function logOut() {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    await window.localStorage.setItem(\"authenticated\", \"false\");\n    dispatch(unauthenticate());\n  };\n}\n\nexport function updateAccount(user) {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    var savedusers = window.localStorage.getItem(\"usersdata\");\n    var usersdata = [];\n    if(savedusers){\n      usersdata = JSON.parse(savedusers);\n    }\n    var newuser = JSON.stringify(user);\n    usersdata.push(newuser);\n    await window.localStorage.setItem(\"usersdata\", JSON.stringify(usersdata));\n    dispatch(unauthenticate());\n  };\n}\n\nexport function checkAuthentication() {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    const auth = await window.localStorage.getItem(\"authenticated\");\n    const formattedAuth = typeof auth === \"string\" ?\n      JSON.parse(auth) :\n      null;\n\n    formattedAuth ? dispatch(authenticate()) : dispatch(unauthenticate());\n  };\n}\n"]},"metadata":{},"sourceType":"module"}