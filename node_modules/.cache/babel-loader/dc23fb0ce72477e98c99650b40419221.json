{"ast":null,"code":"import * as constants from \"../constants\";\n\nfunction authenticate() {\n  return {\n    type: constants.AUTHENTICATE\n  };\n}\n\nfunction unauthenticate() {\n  return {\n    type: constants.UNAUTHENTICATE\n  };\n}\n\nexport function logIn(user) {\n  return async dispatch => {\n    const savedusers = await window.localStorage.getItem(\"usersdata\");\n    const usrdata = typeof savedusers === \"string\" ? JSON.parse(savedusers) : null;\n\n    if (usrdata) {\n      for (let index = 0; index < usrdata.length; index++) {\n        const element = JSON.parse(usrdata[index]);\n\n        if (element.email === user.email && element.password === user.password) {\n          await window.localStorage.setItem(\"authenticated\", \"true\");\n          await window.localStorage.setItem(\"loggeduserid\", element.email);\n          dispatch(authenticate());\n        }\n      }\n    }\n  };\n}\nexport function logOut() {\n  return async dispatch => {\n    await window.localStorage.setItem(\"authenticated\", \"false\");\n    await window.localStorage.removeItem(\"loggeduserid\");\n    dispatch(unauthenticate());\n  };\n}\nexport function updateAccount(user) {\n  return async dispatch => {\n    const savedusers = await window.localStorage.getItem(\"usersdata\");\n    const loggeduserid = await window.localStorage.getItem(\"loggeduserid\");\n    const savedusersdata = typeof savedusers === \"string\" ? JSON.parse(savedusers) : null;\n\n    if (savedusersdata) {\n      for (let index = 0; index < savedusersdata.length; index++) {\n        var element = JSON.parse(savedusersdata[index]);\n\n        if (element.email === loggeduserid) {\n          var newdata = { ...user\n          };\n          savedusersdata[index] = JSON.stringify(newdata);\n        }\n      }\n    }\n\n    await window.localStorage.setItem(\"usersdata\", JSON.stringify(savedusersdata));\n  };\n}\nexport function addAccount(user) {\n  return async dispatch => {\n    const savedusers = await window.localStorage.getItem(\"usersdata\");\n    const savedusersdata = typeof savedusers === \"string\" ? JSON.parse(savedusers) : null;\n    var usersdata = [];\n\n    if (savedusersdata) {\n      usersdata = savedusersdata;\n    }\n\n    user.id = Math.random();\n    var newuser = JSON.stringify(user);\n    usersdata.push(newuser);\n    await window.localStorage.setItem(\"usersdata\", JSON.stringify(usersdata));\n  };\n}\nexport function getAccount(user) {\n  return async dispatch => {\n    const savedusers = await window.localStorage.getItem(\"usersdata\");\n    const savedusersdata = typeof savedusers === \"string\" ? JSON.parse(savedusers) : null;\n    var usersdata = [];\n\n    if (savedusersdata) {\n      usersdata = savedusersdata;\n    }\n\n    var newuser = JSON.stringify(user);\n    usersdata.push(newuser);\n    await window.localStorage.setItem(\"usersdata\", JSON.stringify(usersdata));\n  };\n}\nexport function checkAuthentication() {\n  return async dispatch => {\n    const auth = await window.localStorage.getItem(\"authenticated\");\n    const formattedAuth = typeof auth === \"string\" ? JSON.parse(auth) : null;\n    formattedAuth ? dispatch(authenticate()) : dispatch(unauthenticate());\n  };\n}","map":{"version":3,"sources":["/Users/OsamaAbdullah/Downloads/TempFiles/Today/ReactJs/regovtech/src/actions/current.tsx"],"names":["constants","authenticate","type","AUTHENTICATE","unauthenticate","UNAUTHENTICATE","logIn","user","dispatch","savedusers","window","localStorage","getItem","usrdata","JSON","parse","index","length","element","email","password","setItem","logOut","removeItem","updateAccount","loggeduserid","savedusersdata","newdata","stringify","addAccount","usersdata","id","Math","random","newuser","push","getAccount","checkAuthentication","auth","formattedAuth"],"mappings":"AAEA,OAAO,KAAKA,SAAZ,MAA2B,cAA3B;;AAOA,SAASC,YAAT,GAAuC;AACrC,SAAO;AACLC,IAAAA,IAAI,EAAEF,SAAS,CAACG;AADX,GAAP;AAGD;;AAMD,SAASC,cAAT,GAA2C;AACzC,SAAO;AACLF,IAAAA,IAAI,EAAEF,SAAS,CAACK;AADX,GAAP;AAGD;;AAID,OAAO,SAASC,KAAT,CAAeC,IAAf,EAA4B;AACjC,SAAO,MAAOC,QAAP,IAA6D;AAClE,UAAMC,UAAU,GAAG,MAAMC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAzB;AACA,UAAMC,OAAO,GAAG,OAAOJ,UAAP,KAAsB,QAAtB,GACdK,IAAI,CAACC,KAAL,CAAWN,UAAX,CADc,GAEd,IAFF;;AAIA,QAAGI,OAAH,EAAW;AACT,WAAK,IAAIG,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGH,OAAO,CAACI,MAApC,EAA4CD,KAAK,EAAjD,EAAqD;AACnD,cAAME,OAAO,GAAGJ,IAAI,CAACC,KAAL,CAAWF,OAAO,CAACG,KAAD,CAAlB,CAAhB;;AACA,YAAGE,OAAO,CAACC,KAAR,KAAkBZ,IAAI,CAACY,KAAvB,IAAgCD,OAAO,CAACE,QAAR,KAAqBb,IAAI,CAACa,QAA7D,EAAsE;AACpE,gBAAMV,MAAM,CAACC,YAAP,CAAoBU,OAApB,CAA4B,eAA5B,EAA6C,MAA7C,CAAN;AACA,gBAAMX,MAAM,CAACC,YAAP,CAAoBU,OAApB,CAA4B,cAA5B,EAA4CH,OAAO,CAACC,KAApD,CAAN;AACAX,UAAAA,QAAQ,CAACP,YAAY,EAAb,CAAR;AACD;AACF;AACF;AACF,GAhBD;AAiBD;AAED,OAAO,SAASqB,MAAT,GAAkB;AACvB,SAAO,MAAOd,QAAP,IAA6D;AAClE,UAAME,MAAM,CAACC,YAAP,CAAoBU,OAApB,CAA4B,eAA5B,EAA6C,OAA7C,CAAN;AACA,UAAMX,MAAM,CAACC,YAAP,CAAoBY,UAApB,CAA+B,cAA/B,CAAN;AACAf,IAAAA,QAAQ,CAACJ,cAAc,EAAf,CAAR;AACD,GAJD;AAKD;AAED,OAAO,SAASoB,aAAT,CAAuBjB,IAAvB,EAAoC;AACzC,SAAO,MAAOC,QAAP,IAA6D;AAClE,UAAMC,UAAU,GAAG,MAAMC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAzB;AACA,UAAMa,YAAY,GAAG,MAAMf,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAA3B;AACA,UAAMc,cAAc,GAAG,OAAOjB,UAAP,KAAsB,QAAtB,GACrBK,IAAI,CAACC,KAAL,CAAWN,UAAX,CADqB,GAErB,IAFF;;AAIA,QAAGiB,cAAH,EAAkB;AAChB,WAAK,IAAIV,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGU,cAAc,CAACT,MAA3C,EAAmDD,KAAK,EAAxD,EAA4D;AAC1D,YAAIE,OAAO,GAAGJ,IAAI,CAACC,KAAL,CAAWW,cAAc,CAACV,KAAD,CAAzB,CAAd;;AACA,YAAGE,OAAO,CAACC,KAAR,KAAkBM,YAArB,EAAkC;AAChC,cAAIE,OAAO,GAAG,EACZ,GAAGpB;AADS,WAAd;AAGAmB,UAAAA,cAAc,CAACV,KAAD,CAAd,GAAwBF,IAAI,CAACc,SAAL,CAAeD,OAAf,CAAxB;AACD;AACF;AACF;;AACD,UAAMjB,MAAM,CAACC,YAAP,CAAoBU,OAApB,CAA4B,WAA5B,EAAyCP,IAAI,CAACc,SAAL,CAAeF,cAAf,CAAzC,CAAN;AACD,GAnBD;AAoBD;AAED,OAAO,SAASG,UAAT,CAAoBtB,IAApB,EAAiC;AACtC,SAAO,MAAOC,QAAP,IAA6D;AAClE,UAAMC,UAAU,GAAG,MAAMC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAzB;AACA,UAAMc,cAAc,GAAG,OAAOjB,UAAP,KAAsB,QAAtB,GACrBK,IAAI,CAACC,KAAL,CAAWN,UAAX,CADqB,GAErB,IAFF;AAIA,QAAIqB,SAAS,GAAG,EAAhB;;AACA,QAAGJ,cAAH,EAAkB;AAChBI,MAAAA,SAAS,GAAGJ,cAAZ;AACD;;AACDnB,IAAAA,IAAI,CAACwB,EAAL,GAAUC,IAAI,CAACC,MAAL,EAAV;AACA,QAAIC,OAAO,GAAGpB,IAAI,CAACc,SAAL,CAAerB,IAAf,CAAd;AACAuB,IAAAA,SAAS,CAACK,IAAV,CAAeD,OAAf;AACA,UAAMxB,MAAM,CAACC,YAAP,CAAoBU,OAApB,CAA4B,WAA5B,EAAyCP,IAAI,CAACc,SAAL,CAAeE,SAAf,CAAzC,CAAN;AACD,GAdD;AAeD;AAED,OAAO,SAASM,UAAT,CAAoB7B,IAApB,EAAiC;AACtC,SAAO,MAAOC,QAAP,IAA6D;AAClE,UAAMC,UAAU,GAAG,MAAMC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAzB;AACA,UAAMc,cAAc,GAAG,OAAOjB,UAAP,KAAsB,QAAtB,GACrBK,IAAI,CAACC,KAAL,CAAWN,UAAX,CADqB,GAErB,IAFF;AAIA,QAAIqB,SAAS,GAAG,EAAhB;;AACA,QAAGJ,cAAH,EAAkB;AAChBI,MAAAA,SAAS,GAAGJ,cAAZ;AACD;;AACD,QAAIQ,OAAO,GAAGpB,IAAI,CAACc,SAAL,CAAerB,IAAf,CAAd;AACAuB,IAAAA,SAAS,CAACK,IAAV,CAAeD,OAAf;AACA,UAAMxB,MAAM,CAACC,YAAP,CAAoBU,OAApB,CAA4B,WAA5B,EAAyCP,IAAI,CAACc,SAAL,CAAeE,SAAf,CAAzC,CAAN;AACD,GAbD;AAcD;AAED,OAAO,SAASO,mBAAT,GAA+B;AACpC,SAAO,MAAO7B,QAAP,IAA6D;AAClE,UAAM8B,IAAI,GAAG,MAAM5B,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,eAA5B,CAAnB;AACA,UAAM2B,aAAa,GAAG,OAAOD,IAAP,KAAgB,QAAhB,GACpBxB,IAAI,CAACC,KAAL,CAAWuB,IAAX,CADoB,GAEpB,IAFF;AAIAC,IAAAA,aAAa,GAAG/B,QAAQ,CAACP,YAAY,EAAb,CAAX,GAA8BO,QAAQ,CAACJ,cAAc,EAAf,CAAnD;AACD,GAPD;AAQD","sourcesContent":["import { ThunkDispatch as Dispatch } from \"redux-thunk\";\n\nimport * as constants from \"../constants\";\nimport { AUser } from \"../types\";\n\nexport interface IAuthenticate {\n  type: constants.AUTHENTICATE;\n}\n\nfunction authenticate(): IAuthenticate {\n  return {\n    type: constants.AUTHENTICATE,\n  };\n}\n\nexport interface IUnauthenticate {\n  type: constants.UNAUTHENTICATE;\n}\n\nfunction unauthenticate(): IUnauthenticate {\n  return {\n    type: constants.UNAUTHENTICATE,\n  };\n}\n\nexport type AuthenticationAction = IAuthenticate | IUnauthenticate;\n\nexport function logIn(user: AUser) {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    const savedusers = await window.localStorage.getItem(\"usersdata\");\n    const usrdata = typeof savedusers === \"string\" ?\n      JSON.parse(savedusers) :\n      null;\n\n    if(usrdata){\n      for (let index = 0; index < usrdata.length; index++) {\n        const element = JSON.parse(usrdata[index]);\n        if(element.email === user.email && element.password === user.password){\n          await window.localStorage.setItem(\"authenticated\", \"true\");\n          await window.localStorage.setItem(\"loggeduserid\", element.email);\n          dispatch(authenticate())\n        }\n      }\n    }\n  }\n}\n\nexport function logOut() {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    await window.localStorage.setItem(\"authenticated\", \"false\");\n    await window.localStorage.removeItem(\"loggeduserid\");\n    dispatch(unauthenticate());\n  };\n}\n\nexport function updateAccount(user: AUser) {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    const savedusers = await window.localStorage.getItem(\"usersdata\");\n    const loggeduserid = await window.localStorage.getItem(\"loggeduserid\");\n    const savedusersdata = typeof savedusers === \"string\" ?\n      JSON.parse(savedusers) :\n      null;\n\n    if(savedusersdata){\n      for (let index = 0; index < savedusersdata.length; index++) {\n        var element = JSON.parse(savedusersdata[index]);\n        if(element.email === loggeduserid){\n          var newdata = {\n            ...user\n          }\n          savedusersdata[index] = JSON.stringify(newdata);\n        }\n      }\n    }\n    await window.localStorage.setItem(\"usersdata\", JSON.stringify(savedusersdata));\n  };\n}\n\nexport function addAccount(user: AUser) {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    const savedusers = await window.localStorage.getItem(\"usersdata\");\n    const savedusersdata = typeof savedusers === \"string\" ?\n      JSON.parse(savedusers) :\n      null;\n\n    var usersdata = [];\n    if(savedusersdata){\n      usersdata = savedusersdata;\n    }\n    user.id = Math.random();\n    var newuser = JSON.stringify(user);\n    usersdata.push(newuser);\n    await window.localStorage.setItem(\"usersdata\", JSON.stringify(usersdata));\n  };\n}\n\nexport function getAccount(user: AUser) {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    const savedusers = await window.localStorage.getItem(\"usersdata\");\n    const savedusersdata = typeof savedusers === \"string\" ?\n      JSON.parse(savedusers) :\n      null;\n\n    var usersdata = [];\n    if(savedusersdata){\n      usersdata = savedusersdata;\n    }\n    var newuser = JSON.stringify(user);\n    usersdata.push(newuser);\n    await window.localStorage.setItem(\"usersdata\", JSON.stringify(usersdata));\n  };\n}\n\nexport function checkAuthentication() {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    const auth = await window.localStorage.getItem(\"authenticated\");\n    const formattedAuth = typeof auth === \"string\" ?\n      JSON.parse(auth) :\n      null;\n\n    formattedAuth ? dispatch(authenticate()) : dispatch(unauthenticate());\n  };\n}\n"]},"metadata":{},"sourceType":"module"}