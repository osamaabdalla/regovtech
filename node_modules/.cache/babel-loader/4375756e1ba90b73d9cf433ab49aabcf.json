{"ast":null,"code":"import _objectSpread from\"/Users/OsamaAbdullah/Downloads/TempFiles/Today/ReactJs/regovtech/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/OsamaAbdullah/Downloads/TempFiles/Today/ReactJs/regovtech/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/OsamaAbdullah/Downloads/TempFiles/Today/ReactJs/regovtech/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import*as constants from\"../constants\";function authenticate(){return{type:constants.AUTHENTICATE};}function unauthenticate(){return{type:constants.UNAUTHENTICATE};}export function logIn(user){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var savedusers,usrdata,index,element;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return window.localStorage.getItem(\"usersdata\");case 2:savedusers=_context.sent;usrdata=typeof savedusers===\"string\"?JSON.parse(savedusers):null;if(!usrdata){_context.next=17;break;}index=0;case 6:if(!(index<usrdata.length)){_context.next=17;break;}element=JSON.parse(usrdata[index]);if(!(element.email===user.email&&element.password===user.password)){_context.next=14;break;}_context.next=11;return window.localStorage.setItem(\"authenticated\",\"true\");case 11:_context.next=13;return window.localStorage.setItem(\"loggeduserid\",element.email);case 13:dispatch(authenticate());case 14:index++;_context.next=6;break;case 17:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();}export function logOut(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return window.localStorage.setItem(\"authenticated\",\"false\");case 2:_context2.next=4;return window.localStorage.removeItem(\"loggeduserid\");case 4:dispatch(unauthenticate());case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();}export function updateAccount(user){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var savedusers,loggeduserid,savedusersdata,index,element,newdata;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return window.localStorage.getItem(\"usersdata\");case 2:savedusers=_context3.sent;_context3.next=5;return window.localStorage.getItem(\"loggeduserid\");case 5:loggeduserid=_context3.sent;savedusersdata=typeof savedusers===\"string\"?JSON.parse(savedusers):null;if(savedusersdata){for(index=0;index<savedusersdata.length;index++){element=JSON.parse(savedusersdata[index]);if(element.email===loggeduserid){newdata=_objectSpread({},user);savedusersdata[index]=JSON.stringify(newdata);}}}_context3.next=10;return window.localStorage.setItem(\"usersdata\",JSON.stringify(savedusersdata));case 10:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();}export function addAccount(user){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var savedusers,savedusersdata,usersdata,newuser;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return window.localStorage.getItem(\"usersdata\");case 2:savedusers=_context4.sent;savedusersdata=typeof savedusers===\"string\"?JSON.parse(savedusers):null;usersdata=[];if(savedusersdata){usersdata=savedusersdata;}user.id=Math.random();newuser=JSON.stringify(user);usersdata.push(newuser);_context4.next=11;return window.localStorage.setItem(\"usersdata\",JSON.stringify(usersdata));case 11:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();}export function getAccount(user){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var savedusers,savedusersdata,usersdata,newuser;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return window.localStorage.getItem(\"usersdata\");case 2:savedusers=_context5.sent;savedusersdata=typeof savedusers===\"string\"?JSON.parse(savedusers):null;usersdata=[];if(savedusersdata){usersdata=savedusersdata;}newuser=JSON.stringify(user);usersdata.push(newuser);_context5.next=10;return window.localStorage.setItem(\"usersdata\",JSON.stringify(usersdata));case 10:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref5.apply(this,arguments);};}();}export function checkAuthentication(){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var auth,formattedAuth;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return window.localStorage.getItem(\"authenticated\");case 2:auth=_context6.sent;formattedAuth=typeof auth===\"string\"?JSON.parse(auth):null;formattedAuth?dispatch(authenticate()):dispatch(unauthenticate());case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref6.apply(this,arguments);};}();}","map":{"version":3,"sources":["/Users/OsamaAbdullah/Downloads/TempFiles/Today/ReactJs/regovtech/src/actions/current.tsx"],"names":["constants","authenticate","type","AUTHENTICATE","unauthenticate","UNAUTHENTICATE","logIn","user","dispatch","window","localStorage","getItem","savedusers","usrdata","JSON","parse","index","length","element","email","password","setItem","logOut","removeItem","updateAccount","loggeduserid","savedusersdata","newdata","stringify","addAccount","usersdata","id","Math","random","newuser","push","getAccount","checkAuthentication","auth","formattedAuth"],"mappings":"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","sourcesContent":["import { ThunkDispatch as Dispatch } from \"redux-thunk\";\n\nimport * as constants from \"../constants\";\nimport { AUser } from \"../types\";\n\nexport interface IAuthenticate {\n  type: constants.AUTHENTICATE;\n}\n\nfunction authenticate(): IAuthenticate {\n  return {\n    type: constants.AUTHENTICATE,\n  };\n}\n\nexport interface IUnauthenticate {\n  type: constants.UNAUTHENTICATE;\n}\n\nfunction unauthenticate(): IUnauthenticate {\n  return {\n    type: constants.UNAUTHENTICATE,\n  };\n}\n\nexport type AuthenticationAction = IAuthenticate | IUnauthenticate;\n\nexport function logIn(user: AUser) {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    const savedusers = await window.localStorage.getItem(\"usersdata\");\n    const usrdata = typeof savedusers === \"string\" ?\n      JSON.parse(savedusers) :\n      null;\n\n    if(usrdata){\n      for (let index = 0; index < usrdata.length; index++) {\n        const element = JSON.parse(usrdata[index]);\n        if(element.email === user.email && element.password === user.password){\n          await window.localStorage.setItem(\"authenticated\", \"true\");\n          await window.localStorage.setItem(\"loggeduserid\", element.email);\n          dispatch(authenticate())\n        }\n      }\n    }\n  }\n}\n\nexport function logOut() {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    await window.localStorage.setItem(\"authenticated\", \"false\");\n    await window.localStorage.removeItem(\"loggeduserid\");\n    dispatch(unauthenticate());\n  };\n}\n\nexport function updateAccount(user: AUser) {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    const savedusers = await window.localStorage.getItem(\"usersdata\");\n    const loggeduserid = await window.localStorage.getItem(\"loggeduserid\");\n    const savedusersdata = typeof savedusers === \"string\" ?\n      JSON.parse(savedusers) :\n      null;\n\n    if(savedusersdata){\n      for (let index = 0; index < savedusersdata.length; index++) {\n        var element = JSON.parse(savedusersdata[index]);\n        if(element.email === loggeduserid){\n          var newdata = {\n            ...user\n          }\n          savedusersdata[index] = JSON.stringify(newdata);\n        }\n      }\n    }\n    await window.localStorage.setItem(\"usersdata\", JSON.stringify(savedusersdata));\n  };\n}\n\nexport function addAccount(user: AUser) {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    const savedusers = await window.localStorage.getItem(\"usersdata\");\n    const savedusersdata = typeof savedusers === \"string\" ?\n      JSON.parse(savedusers) :\n      null;\n\n    var usersdata = [];\n    if(savedusersdata){\n      usersdata = savedusersdata;\n    }\n    user.id = Math.random();\n    var newuser = JSON.stringify(user);\n    usersdata.push(newuser);\n    await window.localStorage.setItem(\"usersdata\", JSON.stringify(usersdata));\n  };\n}\n\nexport function getAccount(user: AUser) {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    const savedusers = await window.localStorage.getItem(\"usersdata\");\n    const savedusersdata = typeof savedusers === \"string\" ?\n      JSON.parse(savedusers) :\n      null;\n\n    var usersdata = [];\n    if(savedusersdata){\n      usersdata = savedusersdata;\n    }\n    var newuser = JSON.stringify(user);\n    usersdata.push(newuser);\n    await window.localStorage.setItem(\"usersdata\", JSON.stringify(usersdata));\n  };\n}\n\nexport function checkAuthentication() {\n  return async (dispatch: Dispatch<AuthenticationAction, {}, any>) => {\n    const auth = await window.localStorage.getItem(\"authenticated\");\n    const formattedAuth = typeof auth === \"string\" ?\n      JSON.parse(auth) :\n      null;\n\n    formattedAuth ? dispatch(authenticate()) : dispatch(unauthenticate());\n  };\n}\n"]},"metadata":{},"sourceType":"module"}